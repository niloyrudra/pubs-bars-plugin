{"version":3,"sources":["google-map.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","map","jQuery","document","ready","$","mapDiv","options","getElementById","center","lat","lng","zoom","mapTypeControlOptions","style","google","maps","MapTypeControlStyle","DROPDOWN_MENU","mapTypeId","Map","infoWindow","InfoWindow","onclick","searchLocations","locationSelect","onchange","markerNum","selectedIndex","value","event","trigger","markers","address","Geocoder","geocode","results","status","GeocoderStatus","OK","close","setMap","innerHTML","option","createElement","appendChild","clearLocations","radius","url","callback","data","xml","str","window","ActiveXObject","doc","loadXML","DOMParser","parseFromString","parseXml","markerNodes","documentElement","getElementsByTagName","bounds","LatLngBounds","getAttribute","name","distance","parseFloat","latlng","LatLng","createOption","createMarker","extend","fitBounds","visibility","request","XMLHttpRequest","onreadystatechange","readyState","doNothing","responseText","open","send","searchLocationsNear","geometry","location","alert","html","marker","Marker","position","addListener","setContent","push","num"],"mappings":"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","file":"google-map.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\njQuery(document).ready(function ($) {\n  initMap();\n});\n\nvar map;\nvar markers = [];\nvar infoWindow;\nvar locationSelect;\n\nfunction initMap() {\n\n  // var mapPosition = {lat: -33.863276, lng: 151.107977}; // Sydney Location\n  var mapPosition = { lat: 51.5074, lng: -0.1278 }; // London Location\n\n  var mapDiv = document.getElementById('map');\n\n  var options = {\n    center: mapPosition,\n    zoom: 8,\n    mapTypeControlOptions: { style: google.maps.MapTypeControlStyle.DROPDOWN_MENU },\n    mapTypeId: 'roadmap'\n  };\n\n  map = new google.maps.Map(mapDiv, options);\n\n  infoWindow = new google.maps.InfoWindow();\n\n  var searchButton = document.getElementById(\"searchButton\");\n  searchButton.onclick = searchLocations;\n\n  locationSelect = document.getElementById(\"locationSelect\");\n\n  locationSelect.onchange = function () {\n\n    var markerNum = locationSelect.options[locationSelect.selectedIndex].value;\n    if (markerNum != \"none\") {\n      google.maps.event.trigger(markers[markerNum], 'click');\n    }\n  };\n}\n\nfunction searchLocations() {\n\n  var address = document.getElementById(\"addressInput\").value;\n\n  var geocoder = new google.maps.Geocoder();\n\n  geocoder.geocode({ address: address }, function (results, status) {\n\n    if (status == google.maps.GeocoderStatus.OK) {\n      searchLocationsNear(results[0].geometry.location);\n    } else {\n      alert(address + ' not found');\n    }\n  });\n}\n\nfunction clearLocations() {\n  infoWindow.close();\n  for (var i = 0; i < markers.length; i++) {\n    markers[i].setMap(null);\n  }\n  markers.length = 0;\n\n  locationSelect.innerHTML = \"\";\n  var option = document.createElement(\"option\");\n  option.value = \"none\";\n  option.innerHTML = \"See all results:\";\n  locationSelect.appendChild(option);\n}\n\nfunction searchLocationsNear(center) {\n  clearLocations();\n\n  var radius = document.getElementById('radiusSelect').value;\n  var searchUrl = 'storelocator.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;\n  downloadUrl(searchUrl, function (data) {\n    var xml = parseXml(data);\n    var markerNodes = xml.documentElement.getElementsByTagName(\"marker\");\n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0; i < markerNodes.length; i++) {\n      var id = markerNodes[i].getAttribute(\"id\");\n      var name = markerNodes[i].getAttribute(\"name\");\n      var address = markerNodes[i].getAttribute(\"address\");\n      var distance = parseFloat(markerNodes[i].getAttribute(\"distance\"));\n      var latlng = new google.maps.LatLng(parseFloat(markerNodes[i].getAttribute(\"lat\")), parseFloat(markerNodes[i].getAttribute(\"lng\")));\n\n      createOption(name, distance, i);\n      createMarker(latlng, name, address);\n      bounds.extend(latlng);\n    }\n    map.fitBounds(bounds);\n    locationSelect.style.visibility = \"visible\";\n    locationSelect.onchange = function () {\n      var markerNum = locationSelect.options[locationSelect.selectedIndex].value;\n      google.maps.event.trigger(markers[markerNum], 'click');\n    };\n  });\n}\n\n// Create Markers\nfunction createMarker(latlng, name, address) {\n  var html = \"<b>\" + name + \"</b> <br/>\" + address;\n  var marker = new google.maps.Marker({\n    map: map,\n    position: latlng\n  });\n  google.maps.event.addListener(marker, 'click', function () {\n    infoWindow.setContent(html);\n    infoWindow.open(map, marker);\n  });\n  markers.push(marker);\n}\n\n// Create Options\nfunction createOption(name, distance, num) {\n  var option = document.createElement(\"option\");\n  option.value = num;\n  option.innerHTML = name;\n  locationSelect.appendChild(option);\n}\n\nfunction downloadUrl(url, callback) {\n  var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest();\n\n  request.onreadystatechange = function () {\n    if (request.readyState == 4) {\n      request.onreadystatechange = doNothing;\n      callback(request.responseText, request.status);\n    }\n  };\n\n  request.open('GET', url, true);\n  request.send(null);\n}\n\nfunction parseXml(str) {\n  if (window.ActiveXObject) {\n    var doc = new ActiveXObject('Microsoft.XMLDOM');\n    doc.loadXML(str);\n    return doc;\n  } else if (window.DOMParser) {\n    return new DOMParser().parseFromString(str, 'text/xml');\n  }\n}\n\nfunction doNothing() {}\n\n},{}]},{},[1]);\n"]}